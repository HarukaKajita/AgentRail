# Request: 2026-02-19__task-commit-boundary-automation-flow

## 前提知識 (Prerequisites / 前提知識) [空欄禁止]

- 参照資料:
  - `AGENTS.md`
  - `docs/INDEX.md`
- 理解ポイント:
  - 本資料に入る前に、目的・受入条件・依存関係を把握する。


## 要望の原文

- タスクの起票後や実行後などに、その作業差分を git commit する運用をフローに組み込みたい。
- 異なる作業の差分が stage に混在しないよう、適切なタイミングでコミットして作業を自動で区切りたい。
- この要望を要件確定するところまで進めてタスクを起票してほしい。

## 要望分析

- 直要求:
  - 起票後・実行後などの節目でコミットを行う標準フローを定義する。
  - stage 混在を防ぐための判定ルールと運用手順を定義する。
  - 要件確定済み task を起票する。
- 潜在要求:
  - コミット単位を作業単位に揃え、レビュー性とロールバック性を高める。
  - 複数 task 並行時の差分混入を fail-fast で防止する。
- 非要求:
  - 本リクエスト内で全自動コミット実装を完了すること。
  - 既存履歴の書き換え。

## 提案オプション（3案）

1. 最小:
   - docs へ「節目でコミットする」運用ルールを追記するのみ。
2. バランス:
   - 運用ルール + コミット前チェック（stage差分が単一taskに属するか）を導入する。
3. 強化（採用）:
   - バランス案に加えて、起票後/実装後/review後などのコミット境界を明文化し、validator/checker とスキル運用へ反映する。

## 推奨案

- 採用: オプション3（強化）
- 採用理由:
  - 要望が「自動で区切る」ことを含むため、運用文書のみでは再現性が不足するため。
  - 境界定義と検証ルールを同時に定義することで、差分混在を継続的に抑制できるため。
- 非採用理由:
  - オプション1は人依存が強く混在再発を防げない。
  - オプション2はコミットタイミングの標準が不足し運用ばらつきが残る。

## 分割提案

1. フェーズ1: コミット境界（いつ区切るか）と命名規則を定義する。
2. フェーズ2: stage混在検知ルール（単一task差分制約）を定義する。
3. フェーズ3: docs/skills/checker 反映範囲と移行方針を定義する。

## 確認質問（2〜4件）

- なし（要件化に必要な情報は要望内で充足している）。

## request 反映方針

- コミット境界の標準化、混在検知、運用導線更新を一体の改善タスクとして仕様化する。

## blocked 判定

- blocked ではない。
