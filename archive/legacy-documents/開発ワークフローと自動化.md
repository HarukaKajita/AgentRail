AgenticCoding/AgenticEngineeringなアプローチの開発工程における効率的なワークフローを具体化して、それを実現するパイプラインそのものをどうAgenticに開発するかを思案する。

開発の流れは端的に表すと以下のようになる。この過程で与えられた要望が複雑で複数の要望に分割すべきと判断された時は、分割しそれぞれに対してこのフローを進める。
1. 要望（「あれをこうしたい」、「ここにこんな不具合があるから修正したい」）
2. 調査（実現するには何が必要か、何が原因かの調査、情報整理。）
3. 調査の結果、考慮不足で合った点も明確に要望を確定させる。（AIの場合はAskUserQuestions）
4. 既存の仕様と重複、競合がないか、整合性・一貫性が保たれる要望か検討。
5. 重複、競合、不整合、一貫性の欠如があれば既存仕様か要望を修正する。仕様書なども更新する。
6. 要件を確定させる。要件にはテスト要件も含まれる。（ここもっと具体化したい）
7. 実装計画を立てる。
8. 実装、テスト実装。
9. テスト。
10. テストをクリアするまで修正を繰り返す。
11. レビューと改善。
12. 実装と修正過程で気付いた仕様書などの資料に記録・追記するべき事項があれば追記。

定期的にチェックしたい項目
- 資料と実装に不整合が無いか
- 資料のインデックス更新（資料同士の関連性チェック）
- SOLID,DRY,KISS,YAGNIチェック（追加・修正ごとに毎回でも良い）

この流れで機能追加や修正を達成する。機能追加や修正で仕様書や資料が必ず更新される。なので仕様書などの資料を読めば既存の設計・実装・アセット・制約など全て分かる状態になる。というかそうするようにワークフローとパイプラインを設計する。そうすれば、常に仕様・資料と実際の実装が整合することになる。何か実装する際にも、既存仕様の把握が容易になる。段階的な実装によってプロダクトがつぎはぎにならず、仕様だけを書き溜めて、全体の実装計画を立てて、実装に取り掛かり効率的なプロダクトに仕上がる事になる。仕様を溜めていった結果、一部をモジュールとして切り離して開発するのが合理的と判断できたりもあり得る。適切にモジュールに分離してそれぞれを小さく開発させることで、本プロダクトのコンテキストも各モジュールのコンテキストも小さく保てる。エージェント間でコンテキストの受け渡しをする際も基本的には資料のリストと経緯を共有するのみで成立するはず。
仕様資料群から、UI/UX設計を進行させて複数案を出して選択するというのもやりやすくなる。段階的に実装していくとUI/UX再設計は簡単ではない。常に整合した仕様が存在していて、開発に求められるコンテキストが小さく保たれていればこういった大きな変更にも堅牢に対応可能になるはず。
仕様資料に持たせる情報として関連資料のリストを持たせて、関連コンテキストを参照しやすくする工夫も可能。
メインのエージェントが仕様を作成して、そこから別エージェントに実装計画を立てさせる時に渡すコンテキストが不足しないように関連資料のリストなどを渡せば、マルチエージェントでの開発効率改善に役立つ。人間が資料を読むときにも分かりやすくなる。
直接的に仕様を記述した資料ではないが必要になる資料も十分あり得る。例えば開発における共有事項や意思決定の根拠、中長期的に重要な気付きなど仕様とは異なるが重要な情報なども資料として残し、随時更新する。仕様書のフォーマットの改善案などが開発中に気付きとして発生すればそれを基にフィードバックして資料全体を更新するなどの自己改善機構にもなり得る。これらの資料も仕様書も関連性によってリンクされてコンテキストの補助として役立つ。
資料全体をまとめて欲しい情報を検索しやすくするインデックス資料も用意して人間にもAIにも可読性の高い資料構成が必要。

この資料バンクの仕組みと、エージェントにこの流れの作業を固定させるパイプラインをどう作るかが問題になる。パイプラインを実現する複数のskillsとAGENT.mdの記述とセッション間で記憶を持続させるためのMEMORY.mdファイルなどで実現されるだろうと思う。

長時間動作し続けた場合に、コンテキストウィンドウがいっぱいになり圧縮が実行されると精度が落ちる為、作業状況や各サブエージェントへの作業依頼状況や次にやることなどをまとめてMEMORY.mdに記録しておく。一度セッションをリセットさせてからMEMORY.mdを頼りに作業を再開可能にすることが出来る。

SubAgentの仕組みも重要になる。各工程やタスクに対して適切なモデルや権限で作業してトークン消費効率を最適化可能になる。ClaudeCodeとCodexCLIではSubAgent相当の定義の仕方や起動の仕方などに差がある。必要な部分はそれぞれ定義してあげて、共通化可能な箇所は共通化してどの環境でも機能するフレームワークを構築したい。

claude codeとcodexを比べると機能差がある。plugin,hooks,など
ClaudeCodeでもCodexCLIでも機能するフレームワークにする。


同じではないが似たフレームワークとしこういうのがある
https://github.com/obra/superpowers
https://github.com/Chachamaru127/claude-code-harness/
https://github.com/EveryInc/compound-engineering-plugin
